# 出力前セルフチェックリスト

AIは出力前に以下を確認すること。

---

## 必須要素チェック

- [ ] 6種テーマすべてのCSS定義があるか（ライト、ダーク、オーシャン、フォレスト、サンセット、サクラ）
- [ ] 各テーマで12色の変数が定義されているか
- [ ] テーマ名がすべてカタカナ表記か
- [ ] `--font-family` の先頭が `'Noto Sans JP'` か
- [ ] ロード画面の実装があるか
- [ ] Driver.js によるツアー機能があるか（最低5ステップ）
- [ ] 設定モーダルの実装があるか
- [ ] `localStorage` への保存/復元処理があるか
- [ ] モーダル外クリックで閉じる処理があるか

---

## 日本語チェック

- [ ] ボタンラベルに英語がないか（OK, Cancel, Submit等は禁止）
- [ ] 見出し・ラベルに英語がないか（Settings→設定、Home→ホーム）
- [ ] エラーメッセージが日本語か
- [ ] ツアーの説明文が日本語か
- [ ] テーマ選択ボタンがカタカナ表記か（Light→ライト）

---

## HIG準拠チェック（Phase 1: 全アプリ必須）

- [ ] キャンセル・閉じるボタンがあるか（ユーザーの主導権）
- [ ] 実行できない操作がdisabledになっているか（コンストレイント）
- [ ] 選択状態が視覚的に明示されているか（状態の体現）
- [ ] 意味のない要素が非表示になっているか（意味のある要素のみ）
- [ ] ボタンに「OK」「はい」ではなく具体的な動詞があるか
- [ ] エラーメッセージが建設的で解決方法を示しているか
- [ ] 可逆的な操作に不要な確認ダイアログがないか（黙って実行）

---

## HIG準拠チェック（Phase 2: フォーム系）

- [ ] 入力項目がグループ化されているか（ストーリー性）
- [ ] アクションボタンが流れの終点に配置されているか（ボタン重力）
- [ ] チェックボックスのラベルが肯定文か
- [ ] 数値入力よりスライダー等を優先しているか
- [ ] 全角/半角の自動変換処理があるか（厳密さを求めない）
- [ ] オートコンプリートや候補表示があるか（入力サジェスチョン）
- [ ] Undo機能やゴミ箱機能があるか（フェールセーフ）
- [ ] エラーが入力欄の近くに表示されるか（近接フィードバック）

---

## HIG準拠チェック（Phase 3: UX向上）

- [ ] 入力例がプレースホルダーで示されているか（記憶に頼らない）
- [ ] 数値だけでなく意味が伝わる表現か（情報を伝える）
- [ ] 初回起動時にサンプルデータや成功体験があるか（即座の喜び）
- [ ] 必須項目が最小限に抑えられているか（回答の先送り）
- [ ] 詳細設定が折りたたまれているか（プログレッシブ・ディスクロージャ）

---

## GAS制約対応チェック

- [ ] すべてのGAS呼び出しにローディング表示があるか
- [ ] GAS実行中のボタンがdisabledになっているか（連続クリック防止）
- [ ] `withSuccessHandler`と`withFailureHandler`が実装されているか
- [ ] 削除機能は論理削除またはアーカイブ方式か
- [ ] 不可逆的操作には確認ダイアログがあるか（「取り消せません」を明記）
- [ ] 動的サジェストにデバウンス（500ms）が実装されているか
- [ ] エラーメッセージが具体的で日本語か

---

## コード品質チェック

- [ ] `doGet` 関数が正しく実装されているか
- [ ] HTML/CSS/JSが1ファイル（Index.html）に統合されているか
- [ ] CSS変数が正しく使用されているか
- [ ] イベントリスナーが適切に設定されているか
- [ ] メモリリークの原因となるコードがないか

---

## スタンドアロン対応チェック

- [ ] `appsscript.json` に `webapp` 設定が含まれているか
- [ ] `getActiveSpreadsheet()` を使用していないか（スタンドアロンでは動作しない）
- [ ] `PropertiesService` でスプレッドシートIDを管理しているか
- [ ] シート名がハードコードではなく定数で管理されているか

---

## エラーハンドリングチェック

- [ ] すべてのGAS関数がtry-catchで囲まれているか
- [ ] 返却値が `{ success: true/false, ... }` 形式で統一されているか
- [ ] シートが見つからない場合のエラー処理があるか
- [ ] クライアント側でresult.successの確認をしているか

---

## デプロイチェック

- [ ] GASエディタで直接関数を実行して動作確認したか
- [ ] テストデプロイで動作確認したか
- [ ] 新しいデプロイを作成したか（clasp pushだけでは不十分）
- [ ] 承認フローを完了したか

---

## AI連携チェック（Gemini API使用時）

- [ ] APIキーをPropertiesServiceで安全に管理しているか
- [ ] モデル名を公式ドキュメントで確認したか（頻繁に変更される）
- [ ] AI処理中に適切なローディング表示があるか
- [ ] APIエラー時のフォールバック処理があるか

---

## 修正時の追加チェック

コード修正を行う場合は以下も確認：

- [ ] title属性の値を削除していないか
- [ ] 絵文字（Unicode）を削除していないか
- [ ] 日本語テキストを削除していないか
- [ ] onclick等のイベントハンドラを変更していないか
- [ ] class名を勝手に変更していないか
- [ ] 修正対象外の行が変わっていないか

修正箇所は以下の形式でコメントを付与：

```javascript
// [修正] 〇〇機能を追加
新しいコード
// [/修正]
```
